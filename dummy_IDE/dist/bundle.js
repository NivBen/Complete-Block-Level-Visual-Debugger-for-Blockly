!function(t){var e={};function l(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=t,l.c=e,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},l.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l(l.s=7)}([,function(t,e,l){"use strict";l.d(e,"b",function(){return a}),l.d(e,"a",function(){return o});var a={nest:-1,currentSystemEditorId:null},o=[]},,,,,,function(t,e,l){"use strict";l.r(e);l(11);var a=function(){var t,e;function l(){return void 0!==t}return{Instance:function(){return void 0===t&&(t=new Worker("./dist/debuggee.js"),e={alert:t=>{window.alert(t)},prompt:t=>{a.Instance().postMessage({type:"prompt",data:window.prompt(t)})},highlightBlock:t=>{window.workspace[t.CurrentSystemEditorId].traceOn_=!0,window.workspace[t.CurrentSystemEditorId].highlightBlock(t.id)},execution_finished:()=>{t=void 0}},t.onmessage=function(t){let l=t.data,a=l.data;e[l.type](a)}),t},Stop:function(){l()&&(t.terminate(),t=void 0)},AddOnDispacher:function(t,l){e[t]=l},hasInstance:l}}(),o={Run:()=>{a.Instance().postMessage({type:"run"})},StepIn:()=>{a.hasInstance()&&a.Instance().postMessage({type:"stepIn"})},StepOver:()=>{a.hasInstance()&&a.Instance().postMessage({type:"stepOver"})},StepParent:()=>{a.hasInstance()&&a.Instance().postMessage({type:"stepParent"})},StepOut:()=>{a.hasInstance()&&a.Instance().postMessage({type:"stepOut"})},Stop:()=>{a.Stop()},Start:()=>{if(!a.hasInstance()){Blockly.JavaScript.STATEMENT_PREFIX="await $id(%1, 0);\n";var t=Blockly.JavaScript.workspaceToCode(window.workspace.blockly1),e=Blockly.JavaScript.workspaceToCode(window.workspace.blockly2),l=t+e;a.Instance().postMessage({type:"start_debugging",data:l}),console.log(t+e)}}},r=l(1);Blockly.JavaScript.lists_length=function(t){return["("+(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]")+").length",Blockly.JavaScript.ORDER_MEMBER]},Blockly.JavaScript.lists_isEmpty=function(t){return["!("+(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]")+").length",Blockly.JavaScript.ORDER_LOGICAL_NOT]},Blockly.JavaScript.lists_indexOf=function(t){var e="FIRST"==t.getFieldValue("END")?"indexOf":"lastIndexOf",l=Blockly.JavaScript.valueToCode(t,"FIND",Blockly.JavaScript.ORDER_NONE)||"''";return["("+(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]")+")."+e+"("+l+") + 1",Blockly.JavaScript.ORDER_MEMBER]},Blockly.JavaScript.lists_getIndex=function(t){var e=t.getFieldValue("MODE")||"GET",l=t.getFieldValue("WHERE")||"FROM_START",a=Blockly.JavaScript.valueToCode(t,"AT",Blockly.JavaScript.ORDER_UNARY_NEGATION)||"1",o=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]";if(o="("+o+")","FIRST"==l){if("GET"==e)return[r=o+"[0]",Blockly.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==e)return[r=o+".shift()",Blockly.JavaScript.ORDER_MEMBER];if("REMOVE"==e)return o+".shift();\n"}else if("LAST"==l){if("GET"==e)return[r=o+".slice(-1)[0]",Blockly.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==e)return[r=o+".pop()",Blockly.JavaScript.ORDER_MEMBER];if("REMOVE"==e)return o+".pop();\n"}else if("FROM_START"==l){if(Blockly.isNumber(a)?a=parseFloat(a)-1:a+=" - 1","GET"==e)return[r=o+"["+a+"]",Blockly.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==e)return[r=o+".splice("+a+", 1)[0]",Blockly.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==e)return o+".splice("+a+", 1);\n"}else if("FROM_END"==l){var r;if("GET"==e)return[r=o+".slice(-"+a+")[0]",Blockly.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==e||"REMOVE"==e){if(r=Blockly.JavaScript.provideFunction_("lists_remove_from_end",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, x) {","  x = list.length - x;","  return list.splice(x, 1)[0];","}"])+"("+o+", "+a+")","GET_REMOVE"==e)return[r,Blockly.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==e)return r+";\n"}}else if("RANDOM"==l){if(r=Blockly.JavaScript.provideFunction_("lists_get_random_item",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+o+", "+("GET"!=e)+")","GET"==e||"GET_REMOVE"==e)return[r,Blockly.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==e)return r+";\n"}throw"Unhandled combination (lists_getIndex)."},Blockly.JavaScript.lists_setIndex=function(t){var e=Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]",l=t.getFieldValue("MODE")||"GET",a=t.getFieldValue("WHERE")||"FROM_START",o=Blockly.JavaScript.valueToCode(t,"AT",Blockly.JavaScript.ORDER_NONE)||"1",r=Blockly.JavaScript.valueToCode(t,"TO",Blockly.JavaScript.ORDER_ASSIGNMENT)||"null";function c(){if(e.match(/^\w+$/))return"";var t=Blockly.JavaScript.variableDB_.getDistinctName("tmp_list",Blockly.Variables.NAME_TYPE),l="var "+t+" = "+e+";\n";return e=t,l}if(e="("+e+")","FIRST"==a){if("SET"==l)return e+"[0] = "+r+";\n";if("INSERT"==l)return e+".unshift("+r+");\n"}else if("LAST"==a){if("SET"==l){var i=c();return i+=e+"["+e+".length - 1] = "+r+";\n"}if("INSERT"==l)return e+".push("+r+");\n"}else if("FROM_START"==a){if(Blockly.isNumber(o)?o=parseFloat(o)-1:o+=" - 1","SET"==l)return e+"["+o+"] = "+r+";\n";if("INSERT"==l)return e+".splice("+o+", 0, "+r+");\n"}else if("FROM_END"==a){i=c();if("SET"==l)return i+=e+"["+e+".length - "+o+"] = "+r+";\n";if("INSERT"==l)return i+=e+".splice("+e+".length - "+o+", 0, "+r+");\n"}else if("RANDOM"==a){i=c();var n=Blockly.JavaScript.variableDB_.getDistinctName("tmp_x",Blockly.Variables.NAME_TYPE);if(i+="var "+n+" = Math.floor(Math.random() * "+e+".length);\n","SET"==l)return i+=e+"["+n+"] = "+r+";\n";if("INSERT"==l)return i+=e+".splice("+n+", 0, "+r+");\n"}throw"Unhandled combination (lists_setIndex)."},Blockly.JavaScript.lists_split=function(t){var e=Blockly.JavaScript.valueToCode(t,"INPUT",Blockly.JavaScript.ORDER_MEMBER),l=Blockly.JavaScript.valueToCode(t,"DELIM",Blockly.JavaScript.ORDER_NONE)||"''",a=t.getFieldValue("MODE");if("SPLIT"==a){e||(e="''");var o="split"}else{if("JOIN"!=a)throw"Unknown mode: "+a;e||(e="[]");o="join"}return["("+e+")."+o+"("+l+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.JavaScript.procedures_defreturn=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),l=Blockly.JavaScript.statementToCode(t,"STACK");Blockly.JavaScript.STATEMENT_PREFIX&&(l=Blockly.JavaScript.prefixLines(Blockly.JavaScript.STATEMENT_PREFIX.replace(/%1/g,"await wait(0, '"+t.id+"', '"+r.b.currentSystemEditorId+"')"),Blockly.JavaScript.INDENT)+l),Blockly.JavaScript.INFINITE_LOOP_TRAP&&(l=Blockly.JavaScript.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+t.id+"'")+l);var a=Blockly.JavaScript.valueToCode(t,"RETURN",Blockly.JavaScript.ORDER_NONE)||"";a=a?"  let $returnValue = "+a+";\n  if(flags.currNest != -1) flags.parent = false;\n  flags.currNest = global_nest;\n  return $returnValue;\n":"  if(flags.currNest != -1) flags.parent = false;\n  flags.currNest = global_nest;\n  return;\n";for(var o=[],c=0;c<t.arguments_.length;c++)o[c]=Blockly.JavaScript.variableDB_.getName(t.arguments_[c],Blockly.Variables.NAME_TYPE);var i="async function "+e+"("+o.join(", ")+") {\n  let global_nest = flags.currNest;\n  if(isStepOver() || isStepParent()) flags.currNest = -1;\n"+l+a+"}";return i=Blockly.JavaScript.scrub_(t,i),Blockly.JavaScript.definitions_[e]=i,null},Blockly.JavaScript.procedures_defnoreturn=Blockly.JavaScript.procedures_defreturn,Blockly.JavaScript.procedures_callreturn=function(t){for(var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),l=[],a=0;a<t.arguments_.length;a++)l[a]=Blockly.JavaScript.valueToCode(t,"ARG"+a,Blockly.JavaScript.ORDER_COMMA)||"null";return["await "+e+"("+l.join(", ")+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.JavaScript.procedures_callnoreturn=function(t){for(var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),l=[],a=0;a<t.arguments_.length;a++)l[a]=Blockly.JavaScript.valueToCode(t,"ARG"+a,Blockly.JavaScript.ORDER_COMMA)||"null";return"await "+e+"("+l.join(", ")+");\n"},Blockly.JavaScript.procedures_ifreturn=function(t){var e="if ("+(Blockly.JavaScript.valueToCode(t,"CONDITION",Blockly.JavaScript.ORDER_NONE)||"false")+") {\n  flags.currNest = global_nest;\n  flags.parent = false;\n";t.hasReturnValue_?e+="  return "+(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||"null")+";\n":e+="  return;\n";return e+="}\n"};l(10);Blockly.Generator.prototype.blockToCode=function(t){if(!t)return"";if(t.disabled)return this.blockToCode(t.getNextBlock());var e=this[t.type];goog.asserts.assertFunction(e,'Language "%s" does not know how to generate code for block type "%s".',this.name_,t.type);var l=++r.b.nest,a=e.call(t,t);return r.b.nest--,goog.isArray(a)?(a[0]="await $id(await wait("+l+", '"+t.id+"', '"+r.b.currentSystemEditorId+"'),"+a[0]+")",[this.scrub_(t,a[0]),a[1]]):goog.isString(a)?(this.STATEMENT_PREFIX&&(a=this.STATEMENT_PREFIX.replace(/%1/g,"await wait("+l+", '"+t.id+"', '"+r.b.currentSystemEditorId+"')")+a),this.scrub_(t,a)):null===a?"":void goog.asserts.fail("Invalid code generated: %s",a)},Blockly.Generator.prototype.addLoopTrap=function(t,e){return this.INFINITE_LOOP_TRAP&&(t=this.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+e+"'")+t),this.STATEMENT_PREFIX&&(t+=this.prefixLines(this.STATEMENT_PREFIX.replace(/%1/g,"await wait("+r.b.nest+", '"+e+"', '"+r.b.currentSystemEditorId+"')"),this.INDENT)),t},Blockly.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=Blockly.getMainWorkspace());var e=[];this.init(t);var l=t.getTopBlocks(!0);r.b.currentSystemEditorId=t.systemEditorId;var a="\n// start source code of another editor\n";e.push(a);for(var o,c=0;o=l[c];c++)a=this.blockToCode(o),goog.isArray(a)&&(a=a[0]),a&&(o.outputConnection&&this.scrubNakedValue&&(a=this.scrubNakedValue(a)),e.push(a));return e=e.join("\n"),e=(e=(e=(e=this.finish(e)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},Blockly.BlockSvg.prototype.showContextMenu_=function(t){if(!this.workspace.options.readOnly&&this.contextMenu){var e=this,l=[];if(this.isDeletable()&&this.isMovable()&&!e.isInFlyout){var a={text:Blockly.Msg.DUPLICATE_BLOCK,enabled:!0,callback:function(){Blockly.duplicate_(e)}};if(this.getDescendants().length>this.workspace.remainingCapacity()&&(a.enabled=!1),l.push(a),this.isEditable()&&!this.collapsed_&&this.workspace.options.comments){var o={enabled:!goog.userAgent.IE};this.comment?(o.text=Blockly.Msg.REMOVE_COMMENT,o.callback=function(){e.setCommentText(null)}):(o.text=Blockly.Msg.ADD_COMMENT,o.callback=function(){e.setCommentText("")}),l.push(o)}if(!this.collapsed_)for(var c=1;c<this.inputList.length;c++)if(this.inputList[c-1].type!=Blockly.NEXT_STATEMENT&&this.inputList[c].type!=Blockly.NEXT_STATEMENT){var i={enabled:!0},n=this.getInputsInline();i.text=n?Blockly.Msg.EXTERNAL_INPUTS:Blockly.Msg.INLINE_INPUTS,i.callback=function(){e.setInputsInline(!n)},l.push(i);break}if(this.workspace.options.collapse)if(this.collapsed_){var s={enabled:!0};s.text=Blockly.Msg.EXPAND_BLOCK,s.callback=function(){e.setCollapsed(!1)},l.push(s)}else{var p={enabled:!0};p.text=Blockly.Msg.COLLAPSE_BLOCK,p.callback=function(){e.setCollapsed(!0)},l.push(p)}if(this.workspace.options.disable){var u={text:this.disabled?Blockly.Msg.ENABLE_BLOCK:Blockly.Msg.DISABLE_BLOCK,enabled:!this.getInheritedDisabled(),callback:function(){e.setDisabled(!e.disabled)}};l.push(u)}var E=this.getDescendants().length,v=this.getNextBlock();v&&(E-=v.getDescendants().length);var k={text:1==E?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace("%1",String(E)),enabled:!0,callback:function(){e.dispose(!0,!0)}};l.push(k)}var d={enabled:!!(goog.isFunction(this.helpUrl)?this.helpUrl():this.helpUrl)};d.text=Blockly.Msg.HELP,d.callback=function(){e.showHelp_()},l.push(d);var B={text:"Breakpoint",enabled:!0,callback:function(){r.a.includes(e.id)||r.a.push(e.id),alert("Breakpoint!   "+e.id+"\n "+r.a)}};l.push(B),this.customContextMenu&&!e.isInFlyout&&this.customContextMenu(l),Blockly.ContextMenu.show(t,l,this.RTL),Blockly.ContextMenu.currentBlock=this}},document.getElementById("RunButton").onclick=o.Run,document.getElementById("StepInButton").onclick=o.StepIn,document.getElementById("StepOverButton").onclick=o.StepOver,document.getElementById("StepParentButton").onclick=o.StepParent,document.getElementById("StepOutButton").onclick=o.StepOut,document.getElementById("StopButton").onclick=o.Stop,document.getElementById("StartButton").onclick=o.Start},,,function(t,e){Blockly.JavaScript.text_length=function(t){return["("+(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"''")+").length",Blockly.JavaScript.ORDER_MEMBER]},Blockly.JavaScript.text_isEmpty=function(t){return["!("+(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''")+").length",Blockly.JavaScript.ORDER_LOGICAL_NOT]},Blockly.JavaScript.text_indexOf=function(t){var e="FIRST"==t.getFieldValue("END")?"indexOf":"lastIndexOf",l=Blockly.JavaScript.valueToCode(t,"FIND",Blockly.JavaScript.ORDER_NONE)||"''";return["("+(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''")+")."+e+"("+l+") + 1",Blockly.JavaScript.ORDER_MEMBER]},Blockly.JavaScript.text_charAt=function(t){var e=t.getFieldValue("WHERE")||"FROM_START",l=Blockly.JavaScript.valueToCode(t,"AT",Blockly.JavaScript.ORDER_UNARY_NEGATION)||"1",a=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''";switch(a="("+a+")",e){case"FIRST":return[a+".charAt(0)",Blockly.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[a+".slice(-1)",Blockly.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return Blockly.isNumber(l)?l=parseFloat(l)-1:l+=" - 1",[a+".charAt("+l+")",Blockly.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[a+".slice(-"+l+").charAt(0)",Blockly.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[Blockly.JavaScript.provideFunction_("text_random_letter",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+a+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]}throw"Unhandled option (text_charAt)."},Blockly.JavaScript.text_getSubstring=function(t){var e=Blockly.JavaScript.valueToCode(t,"STRING",Blockly.JavaScript.ORDER_MEMBER)||"''",l=t.getFieldValue("WHERE1"),a=t.getFieldValue("WHERE2"),o=Blockly.JavaScript.valueToCode(t,"AT1",Blockly.JavaScript.ORDER_NONE)||"1",r=Blockly.JavaScript.valueToCode(t,"AT2",Blockly.JavaScript.ORDER_NONE)||"1";if("FIRST"==l&&"LAST"==a)var c=e;else{e="("+e+")";c=Blockly.JavaScript.provideFunction_("text_get_substring",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text, where1, at1, where2, at2) {","  function getAt(where, at) {","    if (where == 'FROM_START') {","      at--;","    } else if (where == 'FROM_END') {","      at = text.length - at;","    } else if (where == 'FIRST') {","      at = 0;","    } else if (where == 'LAST') {","      at = text.length - 1;","    } else {","      throw 'Unhandled option (text_getSubstring).';","    }","    return at;","  }","  at1 = getAt(where1, at1);","  at2 = getAt(where2, at2) + 1;","  return text.slice(at1, at2);","}"])+"("+e+", '"+l+"', "+o+", '"+a+"', "+r+")"}return[c,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.JavaScript.text_changeCase=function(t){var e,l={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[t.getFieldValue("CASE")];l?e="("+(Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''")+")"+l:e=Blockly.JavaScript.provideFunction_("text_toTitleCase",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"(("+(Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''")+"))";return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.JavaScript.text_trim=function(t){alert("text_trim");var e={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[t.getFieldValue("MODE")];return["("+(Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''")+")"+e,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.JavaScript.text_prompt_ext=function(t){if(t.getField("TEXT"))var e=Blockly.JavaScript.quote_(t.getFieldValue("TEXT"));else e=Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''";var l="(await window.prompt("+e+"))";return"NUMBER"==t.getFieldValue("TYPE")&&(l="parseFloat("+l+")"),[l,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.JavaScript.text_prompt=Blockly.JavaScript.text_prompt_ext},function(t,e){window.workspace={},window.workspace.blockly1=Blockly.inject("blocklyDiv",{media:"../../media/",toolbox:document.getElementById("toolbox")}),window.workspace.blockly1.systemEditorId="blockly1",Blockly.Xml.domToWorkspace(window.workspace.blockly1,document.getElementById("startBlocks")),window.workspace.blockly2=Blockly.inject("blocklyDiv2",{media:"../../media/",toolbox:document.getElementById("toolbox")}),window.workspace.blockly2.systemEditorId="blockly2",Blockly.Xml.domToWorkspace(window.workspace.blockly2,document.getElementById("startBlocks"))}]);
//# sourceMappingURL=bundle.js.map