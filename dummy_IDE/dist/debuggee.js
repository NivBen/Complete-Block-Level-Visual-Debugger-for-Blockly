!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";n.r(t),n.d(t,"Blockly_Debuggee",function(){return a}),n.d(t,"window",function(){return r}),n.d(t,"dispatcher",function(){return o});var a={actions:{},state:{currNest:0,currId:"",promptMsg:void 0,stepWait:!1,currState:{stepIn:!1,stepOver:!1,stepParent:!1,stepOut:!1,continue:!0},isState:function(e){return this.currState[e]},setState:function(e){this.currState.stepIn=!1,this.currState.stepOver=!1,this.currState.stepParent=!1,this.currState.stepOut=!1,this.currState.continue=!1,this.currState[e]=!0}}};a.wait=function(){function e(){return e=0,new Promise(t=>setTimeout(t,e));var e}return async function(t,n,r){!function(e,t){postMessage({type:"highlightBlock",data:{id:e,CurrentSystemEditorId:t}})}(n,r);var o=a.actions.breakpoint.includes(n)||a.actions.runToCursor.cursorBreakpoint===n;if(!a.state.isState("continue")||o){if((-1!=a.state.currNest||o)&&(a.state.isState("stepIn")||o||t<=a.state.currNest)){if(a.state.currId===n&&!o)return;if(a.state.isState("stepParent")&&t==a.state.currNest&&!o)return;for(;!a.state.stepWait;)await e();a.state.stepWait=!1,a.state.currId=n,a.state.isState("stepOut")?(a.state.currNest=-1,a.state.currState.stepOut=!1):a.state.currNest=t}}else a.state.currNest=t}}();var r={alert:function(e){postMessage({type:"alert",data:e})},prompt:async function(e){for(postMessage({type:"prompt",data:e});void 0==a.state.promptMsg;)await new Promise(e=>setTimeout(e,0));var t=a.state.promptMsg;return a.state.promptMsg=void 0,t}},o={prompt:e=>{a.state.promptMsg=e}}},function(e,t,n){"use strict";var a=n(0);a.Blockly_Debuggee.actions.watch={},a.Blockly_Debuggee.actions.variables={},a.Blockly_Debuggee.actions.watch=function(){var e=[];return{handler:function(t){e=t},includes:function(t){return e.includes(t)},update:function(t){e=t},update_values:function(){for(var t="",n=0;n<e.length;++n)t+="console.log("+e[n]+");";return t},watches:e}}(),a.Blockly_Debuggee.actions.variables=function(){var e=[];var t=0;return{update:function(t){e=t,console.log(e)},update_values:function(){for(var n="",a=0;a<e.length;++a)n+="variables["+a+"].value = "+e[a].name+";\n",n+="console.log("+e[a].name+");\n";return console.log("count:  "+ ++t),console.log(e),n},getVariables:function(){return e}}}(),a.dispatcher.watch=a.Blockly_Debuggee.actions.watch.handler},function(e,t,n){"use strict";n.r(t);var a=n(0);a.Blockly_Debuggee.actions.continue={},a.Blockly_Debuggee.actions.continue.handler=(()=>{a.Blockly_Debuggee.state.stepWait=!0,a.Blockly_Debuggee.state.setState("continue")}),a.dispatcher.continue=a.Blockly_Debuggee.actions.continue.handler,a.Blockly_Debuggee.actions.breakpoint={},a.Blockly_Debuggee.actions.breakpoint=function(){var e=[];return{handler:function(t){e=t},includes:function(t){return e.includes(t)},update:function(t){e=t}}}(),a.Blockly_Debuggee.actions.runToCursor=function(){return{cursorBreakpoint:"",handler:function(e){a.Blockly_Debuggee.actions.runToCursor.cursorBreakpoint=e,a.Blockly_Debuggee.state.stepWait=!0}}}(),a.dispatcher.breakpoint=a.Blockly_Debuggee.actions.breakpoint.handler,a.dispatcher.runToCursor=a.Blockly_Debuggee.actions.runToCursor.handler,a.Blockly_Debuggee.actions.stepIn={},a.Blockly_Debuggee.actions.stepOver={},a.Blockly_Debuggee.actions.stepOut={},a.Blockly_Debuggee.actions.stepParent={},a.Blockly_Debuggee.actions.stepIn.handler=(()=>{a.Blockly_Debuggee.state.stepWait=!0,a.Blockly_Debuggee.state.setState("stepIn")}),a.Blockly_Debuggee.actions.stepOver.handler=(()=>{a.Blockly_Debuggee.state.stepWait=!0,a.Blockly_Debuggee.state.setState("stepOver")}),a.Blockly_Debuggee.actions.stepOut.handler=(()=>{a.Blockly_Debuggee.state.stepWait=!0,a.Blockly_Debuggee.state.setState("stepOut")}),a.Blockly_Debuggee.actions.stepParent.handler=(()=>{a.Blockly_Debuggee.state.stepWait=!0,a.Blockly_Debuggee.state.setState("stepParent")}),a.dispatcher.stepIn=a.Blockly_Debuggee.actions.stepIn.handler,a.dispatcher.stepOver=a.Blockly_Debuggee.actions.stepOver.handler,a.dispatcher.stepOut=a.Blockly_Debuggee.actions.stepOut.handler,a.dispatcher.stepParent=a.Blockly_Debuggee.actions.stepParent.handler;n(4),n(1);onmessage=function(e){let t=e.data;a.dispatcher[t.type](t.data)}},,function(module,__webpack_exports__,__webpack_require__){"use strict";var _init_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_watches_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),Blockly_Debuggee=__webpack_require__(0).Blockly_Debuggee,window=__webpack_require__(0).window,watches=Blockly_Debuggee.actions.watch.watches,update_values=Blockly_Debuggee.actions.variables.update_values;Blockly_Debuggee.actions.start_debugging=function(){async function handler(content){if(void 0!=content){Blockly_Debuggee.actions.breakpoint.update(content.breakpoints),Blockly_Debuggee.actions.runToCursor.cursorBreakpoint=content.cursorBreakpoint,Blockly_Debuggee.actions.watch.update(content.watches),Blockly_Debuggee.actions.variables.update(content.variables);var variables=Blockly_Debuggee.actions.variables.getVariables(),count;await eval("async function code(){ "+content.code+" }; code();"),postMessage({type:"execution_finished"})}else window.alert("The content is undefined.")}async function $id(e,t,n){return n}var count=0;async function wait(e,t,n){await Blockly_Debuggee.wait(e,t,n),console.log("countWait:  "+ ++count)}function isStepOver(){return Blockly_Debuggee.state.isState("stepOver")}function isStepParent(){return Blockly_Debuggee.state.isState("stepParent")}return{handler:handler}}(),_init_js__WEBPACK_IMPORTED_MODULE_0__.dispatcher.start_debugging=Blockly_Debuggee.actions.start_debugging.handler}]);
//# sourceMappingURL=debuggee.js.map