!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"window",function(){return window}),__webpack_require__.d(__webpack_exports__,"Blockly_Debuggee",function(){return Blockly_Debuggee}),__webpack_require__.d(__webpack_exports__,"dispatcher",function(){return dispatcher});var window={alert:function(e){postMessage({type:"alert",data:e})},prompt:async function(e){for(postMessage({type:"prompt",data:e});void 0==flags.promptMsg;)await next_message();var t=flags.promptMsg;return flags.promptMsg=void 0,t}},Blockly_Debuggee={actions:{},state:{currNest:0,currId:"",promptMsg:void 0,stepWait:!1,currState:{stepIn:!1,stepOver:!1,stepParent:!1,stepOut:!1,continue:!0},isState:function(e){return this.currState[e]},setState:function(e){this.currState.stepIn=!1,this.currState.stepOver=!1,this.currState.stepParent=!1,this.currState.stepOut=!1,this.currState.continue=!1,this.currState[e]=!0}}};Blockly_Debuggee.wait=function(){function highlightBlock(e,t){postMessage({type:"highlightBlock",data:{id:e,CurrentSystemEditorId:t}})}function sleep(e){return new Promise(t=>setTimeout(t,e))}function next_message(){return sleep(0)}async function wait(nest,block_id,CurrentSystemEditorId){highlightBlock(block_id,CurrentSystemEditorId);var code=Blockly_Debuggee.actions.watch.update_values();console.log(code),eval(code);var hasBreakpoint=Blockly_Debuggee.actions.breakpoint.includes(block_id)||Blockly_Debuggee.actions.runToCursor.cursorBreakpoint===block_id;if(!Blockly_Debuggee.state.isState("continue")||hasBreakpoint){if((-1!=Blockly_Debuggee.state.currNest||hasBreakpoint)&&(Blockly_Debuggee.state.isState("stepIn")||hasBreakpoint||nest<=Blockly_Debuggee.state.currNest)){if(Blockly_Debuggee.state.currId===block_id&&!hasBreakpoint)return;if(Blockly_Debuggee.state.isState("stepParent")&&nest==Blockly_Debuggee.state.currNest&&!hasBreakpoint)return;for(;!Blockly_Debuggee.state.stepWait;)await next_message();Blockly_Debuggee.state.stepWait=!1,Blockly_Debuggee.state.currId=block_id,Blockly_Debuggee.state.isState("stepOut")?(Blockly_Debuggee.state.currNest=-1,Blockly_Debuggee.state.currState.stepOut=!1):Blockly_Debuggee.state.currNest=nest}}else Blockly_Debuggee.state.currNest=nest}return wait}();var dispatcher={prompt:e=>{flags.promptMsg=e}}},function(e,t,n){"use strict";n.r(t);var r=n(0);r.Blockly_Debuggee.actions.continue={},r.Blockly_Debuggee.actions.continue.handler=(()=>{r.Blockly_Debuggee.state.stepWait=!0,r.Blockly_Debuggee.state.setState("continue")}),r.dispatcher.continue=r.Blockly_Debuggee.actions.continue.handler,r.Blockly_Debuggee.actions.breakpoint={},r.Blockly_Debuggee.actions.breakpoint=function(){var e=[];return{handler:function(t){e=t},includes:function(t){return e.includes(t)},update:function(t){e=t}}}(),r.Blockly_Debuggee.actions.runToCursor=function(){return{cursorBreakpoint:"",handler:function(e){r.Blockly_Debuggee.actions.runToCursor.cursorBreakpoint=e,r.Blockly_Debuggee.state.stepWait=!0}}}(),r.dispatcher.breakpoint=r.Blockly_Debuggee.actions.breakpoint.handler,r.dispatcher.runToCursor=r.Blockly_Debuggee.actions.runToCursor.handler,r.Blockly_Debuggee.actions.stepIn={},r.Blockly_Debuggee.actions.stepOver={},r.Blockly_Debuggee.actions.stepOut={},r.Blockly_Debuggee.actions.stepParent={},r.Blockly_Debuggee.actions.stepIn.handler=(()=>{r.Blockly_Debuggee.state.stepWait=!0,r.Blockly_Debuggee.state.setState("stepIn")}),r.Blockly_Debuggee.actions.stepOver.handler=(()=>{r.Blockly_Debuggee.state.stepWait=!0,r.Blockly_Debuggee.state.setState("stepOver")}),r.Blockly_Debuggee.actions.stepOut.handler=(()=>{r.Blockly_Debuggee.state.stepWait=!0,r.Blockly_Debuggee.state.setState("stepOut")}),r.Blockly_Debuggee.actions.stepParent.handler=(()=>{r.Blockly_Debuggee.state.stepWait=!0,r.Blockly_Debuggee.state.setState("stepParent")}),r.dispatcher.stepIn=r.Blockly_Debuggee.actions.stepIn.handler,r.dispatcher.stepOver=r.Blockly_Debuggee.actions.stepOver.handler,r.dispatcher.stepOut=r.Blockly_Debuggee.actions.stepOut.handler,r.dispatcher.stepParent=r.Blockly_Debuggee.actions.stepParent.handler;n(3);r.Blockly_Debuggee.actions.watch={},r.Blockly_Debuggee.actions.watch=function(){var e=[];return{handler:function(t){e=t},includes:function(t){return e.includes(t)},update:function(t){e=t},update_values:function(){for(var t="",n=0;n<e.length;++n)t+="console.log("+e[n]+");";return t}}}(),r.dispatcher.watch=r.Blockly_Debuggee.actions.watch.handler,onmessage=function(e){let t=e.data;r.dispatcher[t.type](t.data)}},,function(module,__webpack_exports__,__webpack_require__){"use strict";var _init_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),Blockly_Debuggee=__webpack_require__(0).Blockly_Debuggee,window=__webpack_require__(0).window;Blockly_Debuggee.actions.start_debugging=function(){async function handler(content){void 0!=content?(Blockly_Debuggee.actions.breakpoint.update(content.breakpoints),Blockly_Debuggee.actions.runToCursor.cursorBreakpoint=content.cursorBreakpoint,Blockly_Debuggee.actions.watch.update(content.watches),await eval("async function code(){ "+content.code+" };  code();"),postMessage({type:"execution_finished"})):window.alert("The content is undefined.")}async function $id(e,t){return t}async function wait(e,t,n){await Blockly_Debuggee.wait(e,t,n)}function isStepOver(){return Blockly_Debuggee.state.isState("stepOver")}function isStepParent(){return Blockly_Debuggee.state.isState("stepParent")}return{handler:handler}}(),_init_js__WEBPACK_IMPORTED_MODULE_0__.dispatcher.start_debugging=Blockly_Debuggee.actions.start_debugging.handler}]);
//# sourceMappingURL=debuggee.js.map